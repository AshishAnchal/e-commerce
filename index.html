<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MiniShop SPA</title>
  <style>
    :root{
      --bg: #0f1724;
      --muted: #9aa4b2;
      --accent: #06b6d4;
      --white: #e6eef6;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Inter, system-ui, sans-serif;
      background: linear-gradient(180deg,#071025 0%, #0b1320 100%);
      color:var(--white);
      padding:0;
    }
    header{
      display:flex;justify-content:space-between;align-items:center;
      padding:16px 24px;background:#081324;position:sticky;top:0;z-index:100;
    }
    .brand{font-weight:700;font-size:18px;color:var(--accent)}
    nav a{color:var(--white);text-decoration:none;margin-left:16px;font-weight:500}
    nav a.active{color:var(--accent)}

    main{padding:20px;max-width:1100px;margin:auto;}

    /* product grid */
    .catalog{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:14px}
    .product{background:rgba(255,255,255,0.02);padding:12px;border-radius:12px;transition:.2s;cursor:pointer}
    .product:hover{transform:translateY(-6px);}
    .p-image{height:140px;border-radius:8px;background:#071226;display:flex;align-items:center;justify-content:center;font-size:28px;color:var(--muted)}
    .p-title{font-weight:600;margin-top:6px}
    .p-desc{font-size:13px;color:var(--muted)}
    .price{font-weight:700;margin-top:4px}

    /* product detail */
    .detail{display:grid;grid-template-columns:1fr 1fr;gap:20px}
    .detail-image{height:280px;border-radius:8px;background:#071226;display:flex;align-items:center;justify-content:center;font-size:36px;color:var(--muted)}

    button{cursor:pointer;border:none;border-radius:8px;padding:10px 14px;font-weight:700}
    .btn-accent{background:linear-gradient(90deg,var(--accent),#8b5cf6);color:#04171a}
    .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.2);color:var(--white)}

    .cart-item{display:flex;align-items:center;justify-content:space-between;padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.06)}
    .cart-item span{font-size:14px}

    footer{margin-top:40px;padding:20px;text-align:center;color:var(--muted);font-size:13px}
    @media(max-width:800px){.detail{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <div class="brand">MiniShop</div>
    <nav>
      <a href="#home" id="link-home">Home</a>
      <a href="#checkout" id="link-checkout">Checkout (<span id="cart-count">0</span>)</a>
    </nav>
  </header>

  <main id="app"></main>

  <footer>MiniShop SPA Demo — Built with HTML • CSS • JS</footer>

  <script>
    const products=[
      {id:1,title:'Wireless Headphones',price:2499,desc:'Comfortable over-ear with rich bass.'},
      {id:2,title:'Smart Watch',price:3499,desc:'Steps, heart-rate and notifications.'},
      {id:3,title:'Portable Speaker',price:1999,desc:'Loud, compact, long battery.'},
      {id:4,title:'Gaming Mouse',price:1199,desc:'High DPI sensor and RGB.'},
      {id:5,title:'Mechanical Keyboard',price:3299,desc:'Tactile switches, compact layout.'}
    ];

    let cart=JSON.parse(localStorage.getItem('spa_cart')||'{}');

    function saveCart(){localStorage.setItem('spa_cart',JSON.stringify(cart));updateCartCount();}
    function updateCartCount(){document.getElementById('cart-count').textContent=Object.values(cart).reduce((a,b)=>a+b,0)||0;}

    function formatPrice(n){return '₹'+n.toLocaleString('en-IN');}

    function renderHome(){
      const app=document.getElementById('app');
      app.innerHTML='<h2>Products</h2><div class="catalog"></div>';
      const grid=app.querySelector('.catalog');
      products.forEach(p=>{
        const el=document.createElement('div');el.className='product';
        el.innerHTML=`<div class="p-image">${p.title.split(' ')[0]}</div>
          <div class="p-title">${p.title}</div>
          <div class="p-desc">${p.desc}</div>
          <div class="price">${formatPrice(p.price)}</div>`;
        el.addEventListener('click',()=>navigateTo(`#product/${p.id}`));
        grid.appendChild(el);
      })
    }

    function renderProduct(id){
      const p=products.find(x=>x.id==id);
      if(!p){document.getElementById('app').innerHTML='<p>Product not found.</p>';return;}
      document.getElementById('app').innerHTML=`
        <div class="detail">
          <div class="detail-image">${p.title.split(' ')[0]}</div>
          <div>
            <h2>${p.title}</h2>
            <p style="color:var(--muted)">${p.desc}</p>
            <div style="font-weight:700;font-size:18px;margin:8px 0">${formatPrice(p.price)}</div>
            <button class="btn-accent" id="add">Add to Cart</button>
            <button class="btn-ghost" onclick="navigateTo('#home')">Back</button>
          </div>
        </div>`;
      document.getElementById('add').addEventListener('click',()=>{
        cart[p.id]=(cart[p.id]||0)+1;saveCart();alert('Added to cart');
      });
    }

    function renderCheckout(){
      const app=document.getElementById('app');
      const ids=Object.keys(cart);
      if(ids.length===0){app.innerHTML='<h2>Checkout</h2><p>Your cart is empty.</p>';return;}
      let html='<h2>Checkout</h2>';
      let total=0;
      ids.forEach(id=>{
        const p=products.find(x=>x.id==id);
        const qty=cart[id];
        total+=p.price*qty;
        html+=`<div class="cart-item"><span>${p.title} x ${qty}</span><span>${formatPrice(p.price*qty)}</span></div>`;
      });
      html+=`<div style="margin-top:10px;font-weight:700">Total: ${formatPrice(total)}</div>`;
      html+='<button class="btn-accent" id="pay" style="margin-top:12px">Simulate Checkout</button>';
      app.innerHTML=html;
      document.getElementById('pay').addEventListener('click',()=>{
        alert('Order placed successfully! (demo)');cart={};saveCart();navigateTo('#home');
      });
    }

    function navigateTo(hash){location.hash=hash;}

    function router(){
      const hash=location.hash||'#home';
      document.querySelectorAll('nav a').forEach(a=>a.classList.remove('active'));
      if(hash.startsWith('#home')){document.getElementById('link-home').classList.add('active');renderHome();}
      else if(hash.startsWith('#product/')){const id=hash.split('/')[1];renderProduct(id);}
      else if(hash.startsWith('#checkout')){document.getElementById('link-checkout').classList.add('active');renderCheckout();}
      else{document.getElementById('app').innerHTML='<p>Page not found.</p>'}
    }

    window.addEventListener('hashchange',router);
    updateCartCount();router();
  </script>
</body>
</html>
